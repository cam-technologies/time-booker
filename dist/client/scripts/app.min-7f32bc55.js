/**
 * Time Booker v0.0.0 (https://github.com/cam-technologies/time-booker)
 * Copyright 2014(c) C.A.M. Technologies
 * Licensed under MIT
 */
window.App=Ember.Application.create(),App.Router.map(function(){this.route("articles",{path:"/articles"}),this.route("photos",{path:"/photos"}),this.route("login",{path:"/login"})}),function(){App.LoginController=Ember.Controller.extend({actions:{login:function(){var e=this,t=this.getProperties("username","password");this.set("errorMessage",null),$.post("/auth.json",t).then(function(t){if(e.set("errorMessage",t.message),t.success){alert("Login succeeded!"),e.set("token",t.token);var s=e.get("attemptedTransition");s?(s.retry(),e.set("attemptedTransition",null)):e.transitionToRoute("articles")}})}},reset:function(){this.setProperties({username:"",password:"",errorMessage:""})},token:localStorage.token,tokenChanged:function(){localStorage.token=this.get("token")}.observes("token")})}(),function(){App.AuthenticatedRoute=Ember.Route.extend({beforeModel:function(e){this.controllerFor("login").get("token")||this.redirectToLogin(e)},redirectToLogin:function(e){alert("You must log in!");var t=this.controllerFor("login");t.set("attemptedTransition",e),this.transitionTo("login")},getJSONWithToken:function(e){var t=this.controllerFor("login").get("token");return $.getJSON(e,{token:t})},actions:{error:function(e,t){401===e.status?this.redirectToLogin(t):alert("Something went wrong")}}})}(),function(){App.PhotosRoute=App.AuthenticatedRoute.extend({model:function(){return this.getJSONWithToken("/photos.json")}})}(),function(){App.ArticlesRoute=App.AuthenticatedRoute.extend({model:function(){return this.getJSONWithToken("/articles.json")}})}(),function(){App.LoginRoute=Ember.Route.extend({setupController:function(e){e.reset()}})}(),Ember.TEMPLATES["templates/application"]=Ember.Handlebars.template(function(e,t,s,r,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var o,a="";return n.buffer.push('<h2 id="title">Welcome to Ember.js</h2>\n\n'),o=s._triageMustache.call(t,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:n}),(o||0===o)&&n.buffer.push(o),n.buffer.push("\n"),a}),Ember.TEMPLATES["templates/component-test"]=Ember.Handlebars.template(function(e,t,s,r,n){function o(e,t){var r,n,o="";return t.buffer.push("\n  "),t.buffer.push(p((r=s["pretty-color"]||e&&e["pretty-color"],n={hash:{name:""},hashTypes:{name:"ID"},hashContexts:{name:e},contexts:[],types:[],data:t},r?r.call(e,n):i.call(e,"pretty-color",n)))),t.buffer.push("\n"),o}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var a,h="",i=s.helperMissing,p=this.escapeExpression,u=this;return a=s.each.call(t,{hash:{},hashTypes:{},hashContexts:{},inverse:u.noop,fn:u.program(1,o,n),contexts:[],types:[],data:n}),(a||0===a)&&n.buffer.push(a),n.buffer.push("\n"),h}),Ember.TEMPLATES["templates/error"]=Ember.Handlebars.template(function(e,t,s,r,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var o,a="";return n.buffer.push("<h1>Sorry, Something went wrong</h1>\n"),o=s._triageMustache.call(t,"message",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:n}),(o||0===o)&&n.buffer.push(o),n.buffer.push("\n<pre>\n"),o=s._triageMustache.call(t,"stack",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:n}),(o||0===o)&&n.buffer.push(o),n.buffer.push("\n</pre>\n"),a}),Ember.TEMPLATES["templates/helper-test"]=Ember.Handlebars.template(function(e,t,s,r,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var o,a,h="",i=s.helperMissing,p=this.escapeExpression;return n.buffer.push("<h3>My name is "),n.buffer.push(p((o=s["reverse-word"]||t&&t["reverse-word"],a={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:n},o?o.call(t,"name",a):i.call(t,"reverse-word","name",a)))),n.buffer.push(".</h3>\n"),h}),Ember.TEMPLATES["templates/index"]=Ember.Handlebars.template(function(e,t,s,r,n){function o(e,t){var r,n="";return t.buffer.push("\n  <li>"),r=s._triageMustache.call(e,"",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</li>\n"),n}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var a,h="",i=this;return n.buffer.push("<ul>\n"),a=s.each.call(t,{hash:{},hashTypes:{},hashContexts:{},inverse:i.noop,fn:i.program(1,o,n),contexts:[],types:[],data:n}),(a||0===a)&&n.buffer.push(a),n.buffer.push("\n</ul>\n"),h}),Ember.TEMPLATES["templates/loading"]=Ember.Handlebars.template(function(e,t,s,r,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{},n.buffer.push("<h1>Loading...</h1>\n")}),Ember.TEMPLATES["templates/components/pretty-color"]=Ember.Handlebars.template(function(e,t,s,r,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var o,a="";return n.buffer.push("Pretty Color: "),o=s._triageMustache.call(t,"name",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:n}),(o||0===o)&&n.buffer.push(o),n.buffer.push("\n"),a});